(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3778:function(e,t,a){Promise.resolve().then(a.bind(a,6706))},6706:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return B}});var r=a(7437),n=a(2265),s=a(7020),l=a(4170);function o(e){let{transactions:t}=e,{income:a,expenses:n,balance:s}=(0,l.iN)(t),o=[{label:"Income",value:a,color:"text-green-400",bgColor:"bg-green-400/10",icon:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})})},{label:"Expenses",value:n,color:"text-red-400",bgColor:"bg-red-400/10",icon:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"})})},{label:"Balance",value:Math.abs(s),color:s>=0?"text-green-400":"text-red-400",bgColor:s>=0?"bg-green-400/10":"bg-red-400/10",prefix:s>=0?"+":"-",icon:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}];return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.map((e,t)=>(0,r.jsxs)("div",{className:"vercel-card rounded-lg p-6 group hover:bg-white/[0.08] hover-lift transition-all duration-300 will-change-transform",style:{animationDelay:"".concat(100*t,"ms")},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"text-sm text-white/60 font-medium",children:e.label}),(0,r.jsx)("div",{className:"w-8 h-8 rounded-md ".concat(e.bgColor," ").concat(e.color," flex items-center justify-center group-hover:scale-110 transition-transform duration-300 will-change-transform"),children:e.icon})]}),(0,r.jsxs)("div",{className:"text-2xl font-bold ".concat(e.color," tabular-nums"),children:[e.prefix,(0,l.xG)(e.value)]})]},e.label))})}let i=["Salary","Freelance","Investments","Business","Other Income"],c=["Housing","Food","Transport","Utilities","Entertainment","Healthcare","Shopping","Education","Other Expenses"];function d(e){let{onSubmit:t,onUpdate:a,onCancelEdit:s,initialTransaction:l}=e,[o,d]=(0,n.useState)({title:"",amount:"",category:"",type:"expense",date:new Date().toISOString().split("T")[0]}),[u,m]=(0,n.useState)({}),[h,x]=(0,n.useState)(!1),p=!!l;(0,n.useEffect)(()=>{l?d({title:l.title,amount:l.amount.toString(),category:l.category,type:l.type,date:l.date}):d({title:"",amount:"",category:"",type:"expense",date:new Date().toISOString().split("T")[0]}),m({})},[l]);let f=()=>{let e={};return o.title.trim()||(e.title="Title is required"),(!o.amount||0>=parseFloat(o.amount))&&(e.amount="Amount must be greater than 0"),o.category||(e.category="Category is required"),o.date||(e.date="Date is required"),m(e),0===Object.keys(e).length},g=async e=>{if(e.preventDefault(),f()){if(x(!0),await new Promise(e=>setTimeout(e,300)),p&&l){let e={...l,title:o.title,amount:parseFloat(o.amount),category:o.category,type:o.type,date:o.date};a(e)}else t(o),d({title:"",amount:"",category:"",type:"expense",date:new Date().toISOString().split("T")[0]});m({}),x(!1)}},v=()=>{s&&s()},w=(e,t)=>{d(a=>({...a,[e]:t})),u[e]&&m(t=>({...t,[e]:void 0}))},b="income"===o.type?i:c;return(0,r.jsxs)("div",{className:"vercel-card rounded-lg p-6 hover:bg-white/[0.05] transition-all duration-300",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:p?"Edit Transaction":"Add Transaction"}),p&&(0,r.jsx)("button",{onClick:v,className:"text-white/60 hover:text-white text-sm transition-colors duration-200",children:"Cancel"})]}),(0,r.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-white/80 mb-2",children:"Title"}),(0,r.jsx)("input",{type:"text",id:"title",value:o.title,onChange:e=>w("title",e.target.value),className:"w-full px-3 py-2 vercel-input rounded-md text-white placeholder-white/40 focus:outline-none text-sm transition-all duration-200",placeholder:"Coffee, Salary, etc.",disabled:h}),u.title&&(0,r.jsx)("p",{className:"text-red-400 text-xs mt-1 animate-slide-in-from-top",children:u.title})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-white/80 mb-2",children:"Amount"}),(0,r.jsx)("input",{type:"number",id:"amount",value:o.amount,onChange:e=>w("amount",e.target.value),step:"0.01",min:"0",className:"w-full px-3 py-2 vercel-input rounded-md text-white placeholder-white/40 focus:outline-none text-sm transition-all duration-200",placeholder:"0.00",disabled:h}),u.amount&&(0,r.jsx)("p",{className:"text-red-400 text-xs mt-1 animate-slide-in-from-top",children:u.amount})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-white/80 mb-2",children:"Type"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("select",{id:"type",value:o.type,onChange:e=>w("type",e.target.value),className:"w-full px-3 py-2 vercel-input rounded-md text-white focus:outline-none text-sm transition-all duration-200 appearance-none bg-transparent relative z-10",disabled:h,style:{backgroundImage:"url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\")",backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em"},children:[(0,r.jsx)("option",{value:"expense",style:{backgroundColor:"#000",color:"#fff"},children:"Expense"}),(0,r.jsx)("option",{value:"income",style:{backgroundColor:"#000",color:"#fff"},children:"Income"})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-white/80 mb-2",children:"Category"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("select",{id:"category",value:o.category,onChange:e=>w("category",e.target.value),className:"w-full px-3 py-2 vercel-input rounded-md text-white focus:outline-none text-sm transition-all duration-200 appearance-none bg-transparent relative z-10",disabled:h,style:{backgroundImage:"url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\")",backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em"},children:[(0,r.jsx)("option",{value:"",style:{backgroundColor:"#000",color:"#fff"},children:"Select"}),b.map(e=>(0,r.jsx)("option",{value:e,style:{backgroundColor:"#000",color:"#fff"},children:e},e))]})}),u.category&&(0,r.jsx)("p",{className:"text-red-400 text-xs mt-1 animate-slide-in-from-top",children:u.category})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-white/80 mb-2",children:"Date"}),(0,r.jsx)("input",{type:"date",id:"date",value:o.date,onChange:e=>w("date",e.target.value),className:"w-full px-3 py-2 vercel-input rounded-md text-white focus:outline-none text-sm transition-all duration-200",disabled:h}),u.date&&(0,r.jsx)("p",{className:"text-red-400 text-xs mt-1 animate-slide-in-from-top",children:u.date})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("button",{type:"submit",disabled:h,className:"flex-1 vercel-button font-medium py-2.5 px-4 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-white/20 active-press transition-all duration-200 relative overflow-hidden group disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,r.jsx)("span",{className:"relative z-10",children:h?p?"Saving...":"Adding...":p?"Save Changes":"Add Transaction"}),h&&(0,r.jsx)("div",{className:"absolute inset-0 bg-white/10 animate-pulse"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-white/5 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]}),p&&(0,r.jsx)("button",{type:"button",onClick:v,disabled:h,className:"px-4 py-2.5 text-sm font-medium text-white/60 hover:text-white hover:bg-white/5 rounded-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]})}let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeHeaders:!0,dateFormat:"readable",currencyFormat:"formatted"},a=[...e];if(t.filterType&&"all"!==t.filterType&&(a=a.filter(e=>e.type===t.filterType)),t.dateRange){let e=new Date(t.dateRange.start),r=new Date(t.dateRange.end);a=a.filter(t=>{let a=new Date(t.date);return a>=e&&a<=r})}a.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime());let r=m(a,t),n=x(t);p(r,n)},m=(e,t)=>{let a=[];return t.includeHeaders&&a.push("Date,Title,Category,Type,Amount,Notes"),e.forEach(e=>{let r="iso"===t.dateFormat?e.date:(0,l.p6)(e.date),n="formatted"===t.currencyFormat?(0,l.xG)(e.amount).replace("$",""):e.amount.toString(),s=h(e.title),o=h(e.category),i=e.type;a.push("".concat(r,",").concat(s,",").concat(o,",").concat(i,",").concat(n,",").concat(""))}),a.join("\n")},h=e=>e.includes(",")||e.includes("\n")||e.includes('"')?'"'.concat(e.replace(/"/g,'""'),'"'):e,x=e=>{let t=new Date().toISOString().split("T")[0],a=e.filterType&&"all"!==e.filterType?"_".concat(e.filterType):"",r=e.dateRange?"_".concat(e.dateRange.start,"_to_").concat(e.dateRange.end):"";return"expenseflow_transactions".concat(a).concat(r,"_").concat(t,".csv")},p=(e,t)=>{let a=new Blob(["\uFEFF"+e],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),n=URL.createObjectURL(a);r.setAttribute("href",n),r.setAttribute("download",t),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},f=e=>{u(e,{includeHeaders:!0,dateFormat:"readable",currencyFormat:"formatted"})},g=e=>{u(e,{includeHeaders:!0,dateFormat:"readable",currencyFormat:"formatted",filterType:"income"})},v=e=>{u(e,{includeHeaders:!0,dateFormat:"readable",currencyFormat:"formatted",filterType:"expense"})};function w(e){let{transactions:t,className:a=""}=e,[s,l]=(0,n.useState)(!1),[o,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[m,h]=(0,n.useState)({includeHeaders:!0,dateFormat:"readable",currencyFormat:"formatted",filterType:"all"}),x=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&(l(!1),i(!1))};if(s)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[s]);let p=async e=>{d(!0);try{await new Promise(e=>setTimeout(e,300)),e(),l(!1),i(!1)}catch(e){console.error("Export failed:",e)}finally{d(!1)}},w=async()=>{await p(()=>u(t,m))};return 0===t.length?null:(0,r.jsxs)("div",{className:"relative",ref:x,children:[(0,r.jsxs)("button",{onClick:()=>l(!s),className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-sm font-medium transition-all duration-200 group ".concat(a),disabled:c,children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c?"Exporting...":"Export CSV",(0,r.jsx)("svg",{className:"w-3 h-3 transition-transform duration-200 ".concat(s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&(0,r.jsxs)("div",{className:"absolute top-full left-0 mt-2 w-64 bg-black/95 backdrop-blur-xl border border-white/20 rounded-lg shadow-2xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-4 duration-200",children:[(0,r.jsxs)("div",{className:"p-2 border-b border-white/10",children:[(0,r.jsx)("div",{className:"text-xs text-white/60 px-2 py-1 font-medium",children:"Quick Export"}),(0,r.jsxs)("button",{onClick:()=>p(()=>f(t)),className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 rounded-md transition-all duration-200",disabled:c,children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsxs)("div",{className:"flex-1 text-left",children:[(0,r.jsx)("div",{className:"font-medium",children:"All Transactions"}),(0,r.jsxs)("div",{className:"text-xs text-white/50",children:[t.length," records"]})]})]}),(0,r.jsxs)("button",{onClick:()=>p(()=>g(t)),className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 rounded-md transition-all duration-200",disabled:c,children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})}),(0,r.jsxs)("div",{className:"flex-1 text-left",children:[(0,r.jsx)("div",{className:"font-medium",children:"Income Only"}),(0,r.jsxs)("div",{className:"text-xs text-white/50",children:[t.filter(e=>"income"===e.type).length," records"]})]})]}),(0,r.jsxs)("button",{onClick:()=>p(()=>v(t)),className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 rounded-md transition-all duration-200",disabled:c,children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"})}),(0,r.jsxs)("div",{className:"flex-1 text-left",children:[(0,r.jsx)("div",{className:"font-medium",children:"Expenses Only"}),(0,r.jsxs)("div",{className:"text-xs text-white/50",children:[t.filter(e=>"expense"===e.type).length," records"]})]})]})]}),(0,r.jsxs)("div",{className:"p-2",children:[(0,r.jsxs)("button",{onClick:()=>i(!o),className:"w-full flex items-center justify-between px-3 py-2 text-sm text-white/80 hover:text-white hover:bg-white/5 rounded-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})}),"Advanced Options"]}),(0,r.jsx)("svg",{className:"w-3 h-3 transition-transform duration-200 ".concat(o?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&(0,r.jsxs)("div",{className:"mt-2 p-3 bg-white/5 rounded-md space-y-3 animate-in fade-in slide-in-from-top-2 duration-200",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-white/60 mb-1",children:"Filter Type"}),(0,r.jsxs)("select",{value:m.filterType,onChange:e=>h(t=>({...t,filterType:e.target.value})),className:"w-full px-2 py-1 bg-white/10 border border-white/20 rounded text-xs text-white focus:outline-none focus:border-white/40",children:[(0,r.jsx)("option",{value:"all",children:"All Transactions"}),(0,r.jsx)("option",{value:"income",children:"Income Only"}),(0,r.jsx)("option",{value:"expense",children:"Expenses Only"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-white/60 mb-1",children:"Date Format"}),(0,r.jsxs)("select",{value:m.dateFormat,onChange:e=>h(t=>({...t,dateFormat:e.target.value})),className:"w-full px-2 py-1 bg-white/10 border border-white/20 rounded text-xs text-white focus:outline-none focus:border-white/40",children:[(0,r.jsx)("option",{value:"readable",children:"Readable (Jan 15, 2024)"}),(0,r.jsx)("option",{value:"iso",children:"ISO Format (2024-01-15)"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-white/60 mb-1",children:"Amount Format"}),(0,r.jsxs)("select",{value:m.currencyFormat,onChange:e=>h(t=>({...t,currencyFormat:e.target.value})),className:"w-full px-2 py-1 bg-white/10 border border-white/20 rounded text-xs text-white focus:outline-none focus:border-white/40",children:[(0,r.jsx)("option",{value:"formatted",children:"Formatted (1,234.56)"}),(0,r.jsx)("option",{value:"raw",children:"Raw Numbers (1234.56)"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"includeHeaders",checked:m.includeHeaders,onChange:e=>h(t=>({...t,includeHeaders:e.target.checked})),className:"w-3 h-3 rounded border border-white/20 bg-white/10 text-blue-500 focus:ring-blue-500 focus:ring-1"}),(0,r.jsx)("label",{htmlFor:"includeHeaders",className:"text-xs text-white/80",children:"Include column headers"})]}),(0,r.jsx)("button",{onClick:w,className:"w-full mt-3 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white text-xs font-medium rounded-md transition-all duration-200 flex items-center justify-center gap-2",disabled:c,children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-3 h-3 border border-white/30 border-t-white rounded-full animate-spin"}),"Exporting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3"})}),"Export with Options"]})})]})]})]})]})}function b(e){let{transactions:t,onDelete:a,onEdit:s}=e,[o,i]=(0,n.useState)("date"),[c,d]=(0,n.useState)(""),[u,m]=(0,n.useState)("all"),[h,x]=(0,n.useState)(null),p=t.filter(e=>{let t=e.title.toLowerCase().includes(c.toLowerCase())||e.category.toLowerCase().includes(c.toLowerCase()),a="all"===u||e.type===u;return t&&a}),f=(0,l.Li)(p,o),g=async e=>{window.confirm("Delete this transaction?")&&(x(e),await new Promise(e=>setTimeout(e,200)),a(e),x(null))},v=e=>{s(e)};return 0===t.length?(0,r.jsxs)("div",{className:"vercel-card rounded-lg p-12 text-center hover:bg-white/[0.05] transition-all duration-300",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-white/5 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsx)("h3",{className:"font-medium mb-2",children:"No transactions yet"}),(0,r.jsx)("p",{className:"text-sm text-white/60",children:"Add your first transaction to get started."})]}):(0,r.jsxs)("div",{className:"vercel-card rounded-lg overflow-hidden hover:bg-white/[0.02] transition-all duration-300",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-white/10",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search transactions...",value:c,onChange:e=>d(e.target.value),className:"flex-1 px-3 py-2 vercel-input rounded-md text-white placeholder-white/40 focus:outline-none text-sm transition-all duration-200"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"px-3 py-2 vercel-input rounded-md text-white focus:outline-none text-sm transition-all duration-200 appearance-none bg-transparent relative z-10 pr-8",style:{backgroundImage:"url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\")",backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em"},children:[(0,r.jsx)("option",{value:"all",style:{backgroundColor:"#000",color:"#fff"},children:"All Types"}),(0,r.jsx)("option",{value:"income",style:{backgroundColor:"#000",color:"#fff"},children:"Income"}),(0,r.jsx)("option",{value:"expense",style:{backgroundColor:"#000",color:"#fff"},children:"Expenses"})]})}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("select",{value:o,onChange:e=>i(e.target.value),className:"px-3 py-2 vercel-input rounded-md text-white focus:outline-none text-sm transition-all duration-200 appearance-none bg-transparent relative z-10 pr-8",style:{backgroundImage:"url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\")",backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em"},children:[(0,r.jsx)("option",{value:"date",style:{backgroundColor:"#000",color:"#fff"},children:"Sort by Date"}),(0,r.jsx)("option",{value:"amount",style:{backgroundColor:"#000",color:"#fff"},children:"Sort by Amount"}),(0,r.jsx)("option",{value:"title",style:{backgroundColor:"#000",color:"#fff"},children:"Sort by Title"})]})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"font-semibold",children:"Transactions"}),(0,r.jsxs)("span",{className:"text-xs text-white/60",children:[p.length," of ",t.length]})]}),(0,r.jsx)(w,{transactions:p})]})]}),(0,r.jsx)("div",{className:"max-h-96 overflow-y-auto",children:f.map((e,t)=>(0,r.jsx)("div",{className:"p-4 border-b border-white/5 last:border-b-0 hover:bg-white/[0.02] transition-all duration-300 group ".concat(h===e.id?"opacity-50 scale-95":""),style:{animationDelay:"".concat(50*t,"ms")},children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full transition-all duration-300 ".concat("income"===e.type?"bg-green-400 shadow-glow":"bg-red-400 shadow-glow")}),(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("h3",{className:"font-medium text-sm truncate group-hover:text-white transition-colors duration-200",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-white/50 mt-0.5",children:[(0,r.jsx)("span",{className:"hover:text-white/70 transition-colors duration-200",children:e.category}),(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{className:"hover:text-white/70 transition-colors duration-200",children:(0,l.p6)(e.date)})]})]})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("span",{className:"text-sm font-medium tabular-nums transition-all duration-200 ".concat("income"===e.type?"text-green-400":"text-red-400"," group-hover:scale-105"),children:["income"===e.type?"+":"-",(0,l.xG)(e.amount)]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[(0,r.jsx)("button",{onClick:()=>v(e),className:"p-1 text-white/40 hover:text-blue-400 rounded transition-all duration-200 hover:bg-blue-400/10 active-press","aria-label":"Edit ".concat(e.title),title:"Edit transaction",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("button",{onClick:()=>g(e.id),disabled:h===e.id,className:"p-1 text-white/40 hover:text-red-400 rounded transition-all duration-200 hover:bg-red-400/10 active-press disabled:cursor-not-allowed","aria-label":"Delete ".concat(e.title),title:"Delete transaction",children:h===e.id?(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-red-400/30 border-t-red-400 rounded-full animate-spin"}):(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})},e.id))}),0===p.length&&t.length>0&&(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-white/5 rounded-lg flex items-center justify-center mx-auto mb-3",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,r.jsx)("h3",{className:"font-medium mb-1",children:"No results found"}),(0,r.jsx)("p",{className:"text-sm text-white/60",children:"Try adjusting your search or filters."})]})]})}var j=a(5253),y=a(7703),N=a(8485),k=a(6612),C=a(6812),S=a(9857),E=a(45),D=a(6573),L=a(4235),T=a(39),I=a(1125),F=a(4909),O=a(1346);let M=["#10b981","#3b82f6","#8b5cf6","#f59e0b","#ef4444","#06b6d4","#84cc16","#f97316","#ec4899","#6366f1"];function z(e){let{transactions:t}=e,[a,s]=(0,n.useState)("overview"),o=e=>{let a=t.filter(t=>t.type===e).reduce((e,t)=>(e[t.category]=(e[t.category]||0)+t.amount,e),{});return Object.entries(a).map((e,t)=>{let[a,r]=e;return{name:a,value:r,color:M[t%M.length]}}).sort((e,t)=>t.value-e.value)},i=o("expense"),c=o("income"),d=(()=>{let e=t.reduce((e,t)=>{let a=new Date(t.date),r="".concat(a.getFullYear(),"-").concat(String(a.getMonth()+1).padStart(2,"0")),n=a.toLocaleDateString("en-US",{month:"short",year:"numeric"});return e[r]||(e[r]={month:n,income:0,expenses:0,balance:0}),"income"===t.type?e[r].income+=t.amount:e[r].expenses+=t.amount,e[r].balance=e[r].income-e[r].expenses,e},{});return Object.values(e).sort((e,t)=>e.month.localeCompare(t.month))})(),u=(()=>{let e=[...t].sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),a=0,r=[],n=e.reduce((e,t)=>{let a=t.date;return e[a]||(e[a]={income:0,expenses:0}),"income"===t.type?e[a].income+=t.amount:e[a].expenses+=t.amount,e},{});return Object.entries(n).sort((e,t)=>{let[a]=e,[r]=t;return a.localeCompare(r)}).forEach(e=>{let[t,n]=e;a+=n.income-n.expenses,r.push({date:new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"}),balance:a,income:n.income,expenses:n.expenses})}),r})(),m=t.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),h=t.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0),x=m-h,p=e=>{let{active:t,payload:a,label:n}=e;return t&&a&&a.length?(0,r.jsxs)("div",{className:"bg-black/90 backdrop-blur-xl border border-white/20 rounded-lg p-3 shadow-2xl",children:[(0,r.jsx)("p",{className:"text-white/80 text-sm mb-2",children:n}),a.map((e,t)=>(0,r.jsxs)("p",{className:"text-sm",style:{color:e.color},children:[e.name,": ",(0,l.xG)(e.value)]},t))]}):null},f=e=>{let{active:t,payload:a}=e;if(t&&a&&a.length){let e=a[0];return(0,r.jsxs)("div",{className:"bg-black/90 backdrop-blur-xl border border-white/20 rounded-lg p-3 shadow-2xl",children:[(0,r.jsx)("p",{className:"text-white text-sm font-medium",children:e.name}),(0,r.jsx)("p",{className:"text-sm",style:{color:e.payload.color},children:(0,l.xG)(e.value)})]})}return null};return 0===t.length?(0,r.jsxs)("div",{className:"vercel-card rounded-lg p-12 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-white/5 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-white/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsx)("h3",{className:"font-medium mb-2",children:"No Data to Visualize"}),(0,r.jsx)("p",{className:"text-sm text-white/60",children:"Add some transactions to see beautiful charts and insights."})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"vercel-card rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:[{key:"overview",label:"Overview",icon:"\uD83D\uDCCA"},{key:"categories",label:"Categories",icon:"\uD83E\uDD67"},{key:"trends",label:"Trends",icon:"\uD83D\uDCC8"},{key:"monthly",label:"Monthly",icon:"\uD83D\uDCC5"}].map(e=>(0,r.jsxs)("button",{onClick:()=>s(e.key),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat(a===e.key?"bg-white text-black shadow-lg":"text-white/60 hover:text-white hover:bg-white/5"),children:[(0,r.jsx)("span",{children:e.icon}),e.label]},e.key))}),(0,r.jsx)(w,{transactions:t,className:"ml-auto"})]})}),"overview"===a&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"vercel-card rounded-lg p-6",children:[(0,r.jsxs)("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"Financial Summary"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-white/60 text-sm",children:"Total Income"}),(0,r.jsx)("span",{className:"text-green-400 font-medium",children:(0,l.xG)(m)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-white/60 text-sm",children:"Total Expenses"}),(0,r.jsx)("span",{className:"text-red-400 font-medium",children:(0,l.xG)(h)})]}),(0,r.jsx)("div",{className:"border-t border-white/10 pt-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-white font-medium",children:"Net Balance"}),(0,r.jsxs)("span",{className:"font-bold ".concat(x>=0?"text-green-400":"text-red-400"),children:[x>=0?"+":"",(0,l.xG)(x)]})]})})]})]}),(0,r.jsxs)("div",{className:"lg:col-span-2 vercel-card rounded-lg p-6",children:[(0,r.jsxs)("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-2 h-2 bg-purple-400 rounded-full"}),"Income vs Expenses"]}),(0,r.jsx)(j.h,{width:"100%",height:250,children:(0,r.jsxs)(y.u,{children:[(0,r.jsx)(N.b,{data:[{name:"Income",value:m,color:"#10b981"},{name:"Expenses",value:h,color:"#ef4444"}],cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:[{name:"Income",value:m,color:"#10b981"},{name:"Expenses",value:h,color:"#ef4444"}].map((e,t)=>(0,r.jsx)(k.b,{fill:e.color},"cell-".concat(t)))}),(0,r.jsx)(C.u,{content:(0,r.jsx)(f,{})}),(0,r.jsx)(S.D,{wrapperStyle:{color:"#ffffff"},formatter:e=>(0,r.jsx)("span",{style:{color:"#ffffff"},children:e})})]})})]})]}),"categories"===a&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.length>0&&(0,r.jsxs)("div",{className:"vercel-card rounded-lg p-6",children:[(0,r.jsxs)("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-2 h-2 bg-red-400 rounded-full"}),"Expense Categories"]}),(0,r.jsx)(j.h,{width:"100%",height:300,children:(0,r.jsxs)(y.u,{children:[(0,r.jsx)(N.b,{data:i,cx:"50%",cy:"50%",innerRadius:50,outerRadius:120,paddingAngle:2,dataKey:"value",children:i.map((e,t)=>(0,r.jsx)(k.b,{fill:e.color},"cell-".concat(t)))}),(0,r.jsx)(C.u,{content:(0,r.jsx)(f,{})}),(0,r.jsx)(S.D,{wrapperStyle:{color:"#ffffff",fontSize:"12px"},formatter:e=>(0,r.jsx)("span",{style:{color:"#ffffff"},children:e})})]})})]}),c.length>0&&(0,r.jsxs)("div",{className:"vercel-card rounded-lg p-6",children:[(0,r.jsxs)("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Income Categories"]}),(0,r.jsx)(j.h,{width:"100%",height:300,children:(0,r.jsxs)(y.u,{children:[(0,r.jsx)(N.b,{data:c,cx:"50%",cy:"50%",innerRadius:50,outerRadius:120,paddingAngle:2,dataKey:"value",children:c.map((e,t)=>(0,r.jsx)(k.b,{fill:e.color},"cell-".concat(t)))}),(0,r.jsx)(C.u,{content:(0,r.jsx)(f,{})}),(0,r.jsx)(S.D,{wrapperStyle:{color:"#ffffff",fontSize:"12px"},formatter:e=>(0,r.jsx)("span",{style:{color:"#ffffff"},children:e})})]})})]})]}),"trends"===a&&u.length>0&&(0,r.jsxs)("div",{className:"vercel-card rounded-lg p-6",children:[(0,r.jsxs)("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"Balance Trend Over Time"]}),(0,r.jsx)(j.h,{width:"100%",height:400,children:(0,r.jsxs)(E.T,{data:u,children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"balanceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),(0,r.jsx)(D.q,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),(0,r.jsx)(L.K,{dataKey:"date",stroke:"#ffffff60",fontSize:12}),(0,r.jsx)(T.B,{stroke:"#ffffff60",fontSize:12,tickFormatter:e=>(0,l.xG)(e)}),(0,r.jsx)(C.u,{content:(0,r.jsx)(p,{})}),(0,r.jsx)(I.u,{type:"monotone",dataKey:"balance",stroke:"#3b82f6",strokeWidth:2,fillOpacity:1,fill:"url(#balanceGradient)"})]})})]}),"monthly"===a&&d.length>0&&(0,r.jsxs)("div",{className:"vercel-card rounded-lg p-6",children:[(0,r.jsxs)("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"Monthly Income vs Expenses"]}),(0,r.jsx)(j.h,{width:"100%",height:400,children:(0,r.jsxs)(F.v,{data:d,margin:{top:20,right:30,left:20,bottom:5},children:[(0,r.jsx)(D.q,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),(0,r.jsx)(L.K,{dataKey:"month",stroke:"#ffffff60",fontSize:12}),(0,r.jsx)(T.B,{stroke:"#ffffff60",fontSize:12,tickFormatter:e=>(0,l.xG)(e)}),(0,r.jsx)(C.u,{content:(0,r.jsx)(p,{})}),(0,r.jsx)(S.D,{wrapperStyle:{color:"#ffffff"},formatter:e=>(0,r.jsx)("span",{style:{color:"#ffffff"},children:e})}),(0,r.jsx)(O.$,{dataKey:"income",fill:"#10b981",radius:[4,4,0,0]}),(0,r.jsx)(O.$,{dataKey:"expenses",fill:"#ef4444",radius:[4,4,0,0]})]})})]})]})}var A=a(220);function B(){var e;let[t,a]=(0,n.useState)([]),[l,i]=(0,n.useState)(!0),[c,u]=(0,n.useState)("overview"),[m,h]=(0,n.useState)(null),{user:x,loading:p}=(0,A.useAuth)();(0,n.useEffect)(()=>{let e=async()=>{try{let e=await (0,s.IM)();a(e)}catch(e){console.error("Error loading transactions:",e)}finally{i(!1)}};p||e()},[x,p]);let f=async e=>{try{let t=await (0,s.dT)({title:e.title,amount:parseFloat(e.amount),category:e.category,type:e.type,date:e.date});a(e=>[t,...e.filter(e=>e.id!==t.id)])}catch(e){console.error("Error adding transaction:",e)}},g=async e=>{try{let t=await (0,s.Ld)(e);a(e=>e.map(e=>e.id===t.id?t:e)),h(null)}catch(e){console.error("Error updating transaction:",e)}},v=()=>{h(null)},w=async e=>{try{await (0,s.Ks)(e),a(t=>t.filter(t=>t.id!==e)),(null==m?void 0:m.id)===e&&h(null)}catch(e){console.error("Error deleting transaction:",e)}};return p||l?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-white/60 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-white/30 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})}):(0,r.jsx)("div",{className:"min-h-screen",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-12",children:[(0,r.jsxs)("header",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Dashboard"}),(0,r.jsx)("p",{className:"text-white/60 text-sm",children:x?"Welcome back, ".concat((null===(e=x.user_metadata)||void 0===e?void 0:e.full_name)||x.email):"Manage your income and expenses"})]}),(0,r.jsxs)("div",{className:"flex bg-white/5 rounded-lg p-1 border border-white/10",children:[(0,r.jsx)("button",{onClick:()=>u("overview"),className:"px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ".concat("overview"===c?"bg-white text-black shadow-lg":"text-white/60 hover:text-white hover:bg-white/5"),children:"Overview"}),(0,r.jsxs)("button",{onClick:()=>u("analytics"),className:"px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 flex items-center gap-2 ".concat("analytics"===c?"bg-white text-black shadow-lg":"text-white/60 hover:text-white hover:bg-white/5"),children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Analytics",t.length>0&&(0,r.jsx)("span",{className:"bg-blue-500/20 text-blue-400 text-xs px-1.5 py-0.5 rounded-full font-medium",children:t.length})]})]})]}),x&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-white/60",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,r.jsx)("span",{children:"Synced to cloud"})]}),m&&(0,r.jsx)("div",{className:"mt-4 p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-blue-400 text-sm",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),(0,r.jsxs)("span",{children:["Editing: ",m.title]}),(0,r.jsx)("button",{onClick:v,className:"ml-auto text-blue-400 hover:text-blue-300 transition-colors duration-200",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]}),"overview"===c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)(o,{transactions:t})}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-5 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsx)(d,{onSubmit:f,onUpdate:g,onCancelEdit:v,initialTransaction:m})}),(0,r.jsx)("div",{className:"lg:col-span-3",children:(0,r.jsx)(b,{transactions:t,onDelete:w,onEdit:e=>{h(e),"analytics"===c&&u("overview")}})})]})]}):(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)(o,{transactions:t})}),(0,r.jsx)(z,{transactions:t})]})]})})}},220:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthProvider:function(){return o},useAuth:function(){return i}});var r=a(7437),n=a(2265),s=a(6763);let l=(0,n.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,n.useState)(null),[i,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=async()=>{let{data:{session:e},error:t}=await s.O.auth.getSession();if(t)console.error("Error getting session:",t);else{var a;c(e),o(null!==(a=null==e?void 0:e.user)&&void 0!==a?a:null)}u(!1)};e();let{data:{subscription:t}}=s.O.auth.onAuthStateChange(async(e,t)=>{var a;c(t),o(null!==(a=null==t?void 0:t.user)&&void 0!==a?a:null),u(!1),"SIGNED_IN"===e&&(null==t?void 0:t.user)&&await m(t.user)});return()=>t.unsubscribe()},[]);let m=async e=>{try{var t,a;let{error:r}=await s.O.from("profiles").upsert({id:e.id,email:e.email,full_name:(null===(t=e.user_metadata)||void 0===t?void 0:t.full_name)||null,avatar_url:(null===(a=e.user_metadata)||void 0===a?void 0:a.avatar_url)||null,updated_at:new Date().toISOString()});r&&console.error("Error creating/updating profile:",r)}catch(e){console.error("Error in createOrUpdateProfile:",e)}},h=async(e,t,a)=>{let{error:r}=await s.O.auth.signUp({email:e,password:t,options:{data:{full_name:a||""}}});return{error:r}},x=async(e,t)=>{let{error:a}=await s.O.auth.signInWithPassword({email:e,password:t});return{error:a}},p=async()=>{let{error:e}=await s.O.auth.signOut();return{error:e}},f=async e=>{let{error:t}=await s.O.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});return{error:t}};return(0,r.jsx)(l.Provider,{value:{user:a,session:i,loading:d,signUp:h,signIn:x,signOut:p,resetPassword:f},children:t})}function i(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6763:function(e,t,a){"use strict";a.d(t,{O:function(){return l}});var r=a(1492);let n="https://rvlwsfjwwtnajlqyaqns.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ2bHdzZmp3d3RuYWpscXlhcW5zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExODY3MDYsImV4cCI6MjA2Njc2MjcwNn0.fD6AP068S4rE_ePY4lN1uL9MF2eIgrw-uYMTYH2JTYo";if(!n||!s)throw Error("Missing Supabase environment variables");let l=(0,r.eI)(n,s,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},4170:function(e,t,a){"use strict";a.d(t,{Li:function(){return l},iN:function(){return r},p6:function(){return s},xG:function(){return n}});let r=e=>{let t=e.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),a=e.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0);return{income:t,expenses:a,balance:t-a}},n=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(Math.abs(e)),s=e=>{let t=new Date(e);return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"date";return[...e].sort((e,a)=>{switch(t){case"date":return new Date(a.date).getTime()-new Date(e.date).getTime();case"amount":return a.amount-e.amount;case"title":return e.title.localeCompare(a.title);default:return 0}})}},7020:function(e,t,a){"use strict";a.d(t,{dT:function(){return x},Ks:function(){return v},f1:function(){return m},IM:function(){return w},Ld:function(){return p}});var r=a(6763);let n=e=>({id:e.id,title:e.title,amount:e.amount,category:e.category,type:e.type,date:e.date,createdAt:new Date(e.created_at).getTime()}),s=(e,t)=>({user_id:t,title:e.title,amount:e.amount,category:e.category,type:e.type,date:e.date}),l=async e=>{try{let{data:t,error:a}=await r.O.from("transactions").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(a)throw console.error("Error fetching transactions:",a),a;return(null==t?void 0:t.map(n))||[]}catch(e){throw console.error("Error in getTransactionsFromSupabase:",e),e}},o=async(e,t)=>{try{let{data:a,error:l}=await r.O.from("transactions").insert(s(e,t)).select().single();if(l)throw console.error("Error adding transaction:",l),l;return n(a)}catch(e){throw console.error("Error in addTransactionToSupabase:",e),e}},i=async(e,t,a)=>{try{let s={...t,updated_at:new Date().toISOString()},{data:l,error:o}=await r.O.from("transactions").update(s).eq("id",e).eq("user_id",a).select().single();if(o)throw console.error("Error updating transaction:",o),o;return n(l)}catch(e){throw console.error("Error in updateTransactionInSupabase:",e),e}},c=async(e,t)=>{try{let{error:a}=await r.O.from("transactions").delete().eq("id",e).eq("user_id",t);if(a)throw console.error("Error deleting transaction:",a),a}catch(e){throw console.error("Error in deleteTransactionFromSupabase:",e),e}},d="expense-tracker-transactions",u=async()=>{let{data:{user:e}}=await r.O.auth.getUser();return null==e?void 0:e.id},m=()=>{try{let e=localStorage.getItem(d);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading transactions:",e),[]}},h=e=>{try{localStorage.setItem(d,JSON.stringify(e)),window.dispatchEvent(new CustomEvent("transactionUpdate"))}catch(e){console.error("Error saving transactions:",e)}},x=async e=>{let t=await u();if(!t)return g(e);try{let a=await o(e,t),r=m(),n=[a,...r.filter(e=>e.id!==a.id)];return h(n),a}catch(t){return console.error("Error adding transaction to Supabase:",t),g(e)}},p=async e=>{let t=await u();if(!t)return f(e);try{let a=await i(e.id,{title:e.title,amount:e.amount,category:e.category,type:e.type,date:e.date},t),r=m(),n=r.map(e=>e.id===a.id?a:e);return h(n),a}catch(t){return console.error("Error updating transaction in Supabase:",t),f(e)}},f=e=>{let t=m(),a=t.map(t=>t.id===e.id?e:t);return h(a),e},g=e=>{let t={...e,id:crypto.randomUUID(),createdAt:Date.now()},a=m(),r=[t,...a];return h(r),t},v=async e=>{let t=await u();if(t)try{await c(e,t)}catch(e){console.error("Error deleting transaction from Supabase:",e)}let a=m(),r=a.filter(t=>t.id!==e);h(r)},w=async()=>{let e=await u();if(!e)return m();try{let t=await l(e);return h(t),t}catch(e){return console.error("Error loading transactions from Supabase:",e),m()}}}},function(e){e.O(0,[935,127,971,864,744],function(){return e(e.s=3778)}),_N_E=e.O()}]);